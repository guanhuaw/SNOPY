set -ex
# CG-SENSE based reconstruction
python train.py --ReconVSTraj 1 --nThreads 1 --serial_batches --continue_train --niter_decay 200 --niter 200 --decim 32 --padding 480 --slewmax 15000 --gradmax 4.9 --dataroot put_the_training_folder_here --name qpwls --suffix name_you_want --model QPWLS --gpu_ids 0 --dataset_mode calgary --display_ncol 4 --display_port 18892 --num_blocks 30 --CGtol 0.0005 --CGlambda 0.001 --numpoints 6 --grid_size 2  --loss_content_I_l1 400.0 --loss_content_I_l2 800 --lr 0.0001 --lr_traj 0.0001 --batchSize 8  --num_shots 1024 --nfe 1280 --mask_path /your folder/shots/Radial3Dnum1024length1280.npy --resx 0.1 --resy 0.1 --resz 0.1  --nx 32 --ny 218 --nz 170 --train_phase generator --save_latest_freq 1000 --save_epoch_freq 40 --print_freq 10 --display_freq 1
# MODL based reconstruction
#python train.py --ReconVSTraj 1 --nThreads 1 --serial_batches --continue_train --which_epoch latest --niter_decay 150 --niter 150 --decim 32 --padding 480 --slewmax 15000 --gradmax 4.9 --dataroot put_the_training_folder_here --name Bjork --suffix yourname --model Bjork --gpu_ids 0 --dataset_mode calgary --display_ncol 4 --display_port 18891 --which_model_netG_I didn --ngf 32 --num_blocks 4 --CGtol 0.0005 --CGlambda 0.5 --numpoints 6 --grid_size 2 --loss_content_I_l1 400.0 --loss_content_I_l2 800 --lr 0.00001 --lr_traj 0.00001 --batchSize 3  --num_shots 1024 --nfe 1280 --mask_path yourfolder/shots/Radial3Dnum1024length1280.npy --resx 0.1 --resy 0.1 --resz 0.1  --nx 32 --ny 218 --nz 170 --train_phase generator --save_latest_freq 100 --save_epoch_freq 20 --print_freq 10 --display_freq 1
# For validation, iterate through all checkpoints.
#python test.py --serial_batches  --decim 8 --padding 160 --dataroot validationset --name qpwls --suffix projectname --model QPWLS --gpu_ids 0 --dataset_mode calgary  --num_blocks 30 --CGtol 0.0005 --CGlambda 0.001 --numpoints 6 --grid_size 2  --num_shots 1024 --nfe 1280 --mask_path traj_to_validate --resx 0.1 --resy 0.1 --resz 0.1  --nx 32 --ny 218 --nz 170